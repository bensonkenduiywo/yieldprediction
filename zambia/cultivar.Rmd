---
title: "RHEAS Cultivar Calibration: Zambia"
author: "Dr. -Ing. MISK Benson Kenduiywo"
date: '2022-09-23'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction

Several cultivars from literature within Zambia and Malawi were tested and compared to observed production information in a bid to select a dominant variety for maize yield prediction.


## Reference data

Load Zambia's ministry of agriculture maize forecasts data as reference.

```{r ref1, echo=FALSE, warning=FALSE, message=FALSE}
rm(list = ls(all=TRUE))
unlink(".RData")
root <- "D:/RCMRD/Data/Yields/"
r.file <- paste0(root, "Reference/Zambia/MOA/Zambia_District _Maize_Forecasting_2011_2022.csv")
```

Load cultivars data. Basically, 12 maize cultivars were tested between 2010--2022 to 

```{r ref40, echo=FALSE, warning=FALSE, message=FALSE}
ref <- read.csv(r.file, stringsAsFactors =  FALSE)
names(ref)
```

Convert District and province names to upper case.

```{r ref5, echo=FALSE, warning=FALSE, message=FALSE}
ref$Province <- trimws(toupper(ref$Province), which = c("both"))
sort(unique(ref$Province))
ref$District <- trimws(toupper(ref$District), which = c("both"))
knitr::kable(head(sort(unique(ref$District))), caption="Districts")
```


## Cultivars production

Load information on different cultivars production potential as predicted by RHEA.

```{r c1}
files <- list.files(paste0(root, "Cultivars_Selection/Zambia/"), full.names = T)
f <- read.csv(files[1], stringsAsFactors =  FALSE)
temp <-  aggregate(f[,"gwad", drop=FALSE], f[, c("cname","Year"), drop=FALSE], mean, na.rm=TRUE)
df_list <- list()
for(i in 1:length(files)){
  f <- read.csv(files[i], stringsAsFactors =  FALSE)
  f$cultivar <- sub("\\_.*", "", basename(files[i]))
  temp <- sub("_v2", "", tools::file_path_sans_ext(basename(files[i])))
  f$year <- sub(".*\\_|.csv.*", "", temp)
  df_list[[i]] <- f
}

df <- do.call(rbind, df_list)

```

